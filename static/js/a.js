var a= document.getElementsByName('qrtitle')
(() => {
    "use strict"; function e(e) { return !!["pdf", "social_logo"].includes(e) } function a(e) { var a = e.value; if (e.nextElementSibling && e.nextElementSibling.classList.contains("error_feedback") && e.nextElementSibling.parentNode.removeChild(e.nextElementSibling), e.hasAttribute("required") && ("" == a || null == a)) { var t = document.createElement("p"); return t.classList.add("error_feedback"), t.innerText = "This field is required", e.after(t), !1 } if (e.getAttribute("max") && parseInt(a) > parseInt(e.getAttribute("max"))) { var n = document.createElement("p"); return n.classList.add("error_feedback"), n.innerText = "It cannot be greater than " + e.getAttribute("max"), e.after(n), !1 } if (e.getAttribute("min") && parseInt(a) < parseInt(e.getAttribute("min"))) { var r = document.createElement("p"); return r.classList.add("error_feedback"), r.innerText = "It cannot be less than " + e.getAttribute("min"), e.after(r), !1 } if (e.getAttribute("text-max") && a.length > parseInt(e.getAttribute("max"))) { var o = document.createElement("p"); return o.classList.add("error_feedback"), o.innerText = "It cannot be greater than " + e.getAttribute("max") + " characters", e.after(o), !1 } if (e.getAttribute("text-min") && a.length < parseInt(e.getAttribute("min"))) { var c = document.createElement("p"); return c.classList.add("error_feedback"), c.innerText = "It cannot be less than " + e.getAttribute("min") + " characters", e.after(c), !1 } if ("email" == e.getAttribute("type") && "" !== e.value && null !== e.value && !a.match(/^w+([.-]?w+)*@w+([.-]?w+)*(.w{2,3})+$/)) { var l = document.createElement("p"); return l.classList.add("error_feedback"), l.innerText = "Please enter a valid email address.", e.after(l), !1 } if ("" !== e.value && null !== e.value && e.hasAttribute("type-link")) { if (!function (e) { if (/[(http(s)?)://(www.)?a-zA-Z0-9@:%._+~#=]{2,256}.[a-z]{2,6}b([-a-zA-Z0-9@:%_+.~#?&//=]*)/gi.test(e)) return !0; return !1 }(a)) { var i = document.createElement("p"); return i.classList.add("error_feedback"), i.innerText = "Please enter a valid link.", e.after(i), !1 } a.startsWith("https://") || (e.value = "https://" + a) } if (e.hasAttribute("max-files")) { var s = e.getAttribute("max-files"); if (e.files.length > s) { var d = document.createElement("p"); return d.classList.add("error_feedback"), d.innerText = "You cannot upload more than ".concat(s, " files."), e.after(d), !1 } } return e.nextElementSibling && e.nextElementSibling.classList.contains("error_feedback") && e.nextElementSibling.parentNode.removeChild(e.nextElementSibling), !0 } var t; function n() {
        var t = document.querySelectorAll("[data-basic-input]"), n = new FormData, r = document.querySelector("#svg-content"), o = document.querySelectorAll("[data-type='".concat(document.querySelector("[name='type']:checked").value, "']")), c = 0; if (o.forEach((function (t) { return a(t) ? "images" == t.name && t.value ? void t.files.forEach((function (e) { n.insertAdjacentHTML("beforeend","images[]", e) })) : e(t.name) && t.value ? n.insertAdjacentHTML("beforeend",t.name, t.files[0]) : void n.insertAdjacentHTML("beforeend",t.name, t.value) : c++ })), t.forEach((function (e) { if ("custom_logo" == e.name && e.value) return n.insertAdjacentHTML("beforeend",e.name, e.files[0]); n.insertAdjacentHTML("beforeend",e.name, e.value) })), c) return !1; document.querySelector("[name='transparent_code']").is(":checked") && n.insertAdjacentHTML("beforeend","transparent_code", !0), document.querySelector("[name='gradient']").is(":checked") && n.insertAdjacentHTML("beforeend","gradient", !0), document.querySelector("[name='markers_color']").is(":checked") && n.insertAdjacentHTML("beforeend","markers_color", !0), document.querySelector("[name='custom_logo']")[0].files.length > 0 && n.insertAdjacentHTML("beforeend","custom_logo", document.querySelector("[name='custom_logo']")[0].files[0]), document.querySelector("[name='radial']").is(":checked") && n.insertAdjacentHTML("beforeend","radial", !0), document.querySelector("[name='no_logo_bg']").is(":checked") && n.insertAdjacentHTML("beforeend","no_logo_bg", !0), n.insertAdjacentHTML("beforeend","gradient_color", document.querySelector("[name='gradient_color']").value), n.insertAdjacentHTML("beforeend","pattern", document.querySelector("[name='pattern']:checked").value), n.insertAdjacentHTML("beforeend","marker_out", document.querySelector("[name='marker_out']:checked").value), n.insertAdjacentHTML("beforeend","marker_in", document.querySelector("[name='marker_in']:checked").value), n.insertAdjacentHTML("beforeend","optionlogo", document.querySelector("[name='optionlogo']:checked").value), n.insertAdjacentHTML("beforeend","outer_frame", document.querySelector("[name='outer_frame']:checked").value), n.insertAdjacentHTML("beforeend","framelabel", document.querySelector("[name='framelabel']").value), n.insertAdjacentHTML("beforeend","label_font", document.querySelector("[name='label_font']").value), n.insertAdjacentHTML("beforeend","type", document.querySelector("[name='type']:checked").value), n.insertAdjacentHTML("beforeend","_token", document.querySelector("meta[name='csrf']").attr("content")), r.innerHTML = "", document.querySelector(".placeholder__image").hide(), document.querySelector(".loader").classList.remove("hidden"),
        
        $.ajax({
                url: "https://qrsample.qrlab.co/generate/qrcode",
                type: "POST", data: n,
                processData: !1,
                contentType: !1,
                success: function (e) {
                    document.querySelector(".loader").classList.add("hidden");
                    var arr = e.split("}");
                    var str = arr[0] + "}";
                    // console.log(str);
                    var a = JSON.parse(str);
                    r.innerHTML = a.content
                },
                error: function (e) {
                    document.querySelector(".loader").classList.add("hidden"),
                    document.querySelector(".placeholder__image").show()
                }
            })
    }
    function r() { var e = document.querySelector("[name='type']:checked").value, a = document.getElementById("static-checkbox"); return function (e) { return !!["expiry-management", "pdf", "social_link", "images"].includes(e) }(e) ? a.classList.add("hidden") : a.classList.remove("hidden") } document.querySelector('[data-toggle="switchery"]').each((function () { new Switchery(document.querySelector(this)[0], document.querySelector(this).data()) })), document.querySelector("[name='type']").addEventListener("change", (function () { var e = document.querySelector(this).value; document.querySelector(".active_type").classList.remove("active_type"), document.querySelector("[for='".concat(e, "'] .qr-info__tab-content")).classList.add("active_type"), document.querySelector(".active_form").classList.remove("active_form"), document.querySelector(".qr-info__form-".concat(e)).classList.add("active_form"), r() })), document.querySelector(".pattern_label").addEventListener("click", (function () { document.querySelector(".pattern_label").classList.remove("active_label"), document.querySelector(this).classList.add("active_label") })), document.querySelector(".marker_label").addEventListener("click", (function () { document.querySelector(".marker_label").classList.remove("active_label"), document.querySelector(this).classList.add("active_label") })), document.querySelector(".marker_center_label").addEventListener("click", (function () { document.querySelector(".marker_center_label").classList.remove("active_label"), document.querySelector(this).classList.add("active_label") })), document.querySelector(".logo_label").addEventListener("click", (function () { document.querySelector(".logo_label").classList.remove("active_label"), document.querySelector(this).classList.add("active_label") })), document.querySelector(".frame_label").addEventListener("click", (function () { document.querySelector(".frame_label").classList.remove("active_label"), document.querySelector(this).classList.add("active_label") })), document.querySelector("[name='gradient']").addEventListener("change", (function () { document.querySelector("#gradient_color_box").classList.toggle("hidden") })), document.querySelector(".browse_logo").addEventListener("click", (function () { document.querySelector("[name='custom_logo']").click() })), document.querySelector(".type").addEventListener("change", (function () { document.querySelector(".error_feedback").remove() })), document.querySelector("[name='custom_logo']").addEventListener("change", (function (e) { if (document.querySelector("#custom_logo_filename").text(document.querySelector(this).value.split("\").pop()), this.files[0].type.match("image.*")) { var a = this.files[0], t = new FileReader; t.onload = function (e) { document.querySelector(".logo_label").classList.remove("active_label"), document.querySelector(".custom-watermark").classList.remove("hidden"); var a = '<img src="' + e.target.result + '" class="user_watermark">'; document.querySelector(".custom-watermark .hold-custom-watermark").html(a), document.querySelector(".custom-watermark").classList.add("active_label"), document.querySelector("#custom_logo_input").attr("checked", !0) }, t.readAsDataURL(a) } setTimeout((function () { n() }), 100) })), document.querySelector("[data-color-text]").addEventListener("change", (function () { var e = document.querySelector(this).value; !e.startsWith("#") && (e = "#" + e), /^#([a-f0-9]{6})$/i.test(e) && document.querySelector("[name='".concat(document.querySelector(this).attr("data-color-text"), "']")).val(e) })), document.querySelector("[data-color-input]").addEventListener("change", (function () { document.querySelector("[data-color-text='".concat(document.querySelector(this).attr("name"), "']")).val(document.querySelector(this).value) })), document.querySelectorAll("[data-change]").forEach((function (e) { e.addEventListener("input", (function () { clearTimeout(t), t = setTimeout((function () { n() }), 1e3) })) })), document.querySelector("[name='pattern']").addEventListener("change", (function () { n() })), document.querySelector("[name='marker_out']").addEventListener("change", (function () { n() })), document.querySelector("[name='marker_in']").addEventListener("change", (function () { n() })), document.querySelector("[name='optionlogo']").addEventListener("change", (function () { n() })), document.querySelector("[name='outer_frame']").addEventListener("change", (function () { n() })),
        document.querySelector("#create-qrcode").addEventListener("click",
            (function () {
                var t, n, r = document.querySelector(this),
                o = document.querySelectorAll("[data-basic-input]"),
                c = document.querySelectorAll("[data-type='".concat(document.querySelector("[name='type']:checked").value,
                    "']")), l = 0, i = new FormData;
                if (c.forEach((function (t) {
                    return a(t) ? "images" == t.name && t.value ?
                        void t.files.forEach((function (e) {
                            i.insertAdjacentHTML("beforeend","images[]", e)
                        })) : e(t.name) && t.value ? i.insertAdjacentHTML("beforeend",t.name, t.files[0]) : void
                            i.insertAdjacentHTML("beforeend",t.name, t.value) : l++
                })), l) return !1;
                n = "Submitting", (t = r).attr("disabled", !0),
                    t.text(n), o.forEach((function (e) {
                        if ("custom_logo" == e.name && e.value)
                            return i.insertAdjacentHTML("beforeend",e.name, e.files[0]); i.insertAdjacentHTML("beforeend",e.name, e.value)
                    })),
                    document.querySelector("[name='status']").is(":checked") && i.insertAdjacentHTML("beforeend","status", !0),
                    document.querySelector("[name='static']").is(":checked") && i.insertAdjacentHTML("beforeend","static", !0),
                    document.querySelector("[name='transparent_code']").is(":checked") && i.insertAdjacentHTML("beforeend","transparent_code", !0),
                    document.querySelector("[name='gradient']").is(":checked") && i.insertAdjacentHTML("beforeend","gradient", !0),
                    document.querySelector("[name='markers_color']").is(":checked") && i.insertAdjacentHTML("beforeend","markers_color", !0),
                    document.querySelector("[name='custom_logo']")[0].files.length > 0 && i.insertAdjacentHTML("beforeend","custom_logo",
                        document.querySelector("[name='custom_logo']")[0].files[0]), document.querySelector("[name='radial']")
                            .is(":checked") && i.insertAdjacentHTML("beforeend","radial", !0), document.querySelector("[name='no_logo_bg']")
                                .is(":checked") && i.insertAdjacentHTML("beforeend","no_logo_bg", !0), i.insertAdjacentHTML("beforeend","gradient_color",
                                    document.querySelector("[name='gradient_color']").value), i.insertAdjacentHTML("beforeend","pattern",
                                        document.querySelector("[name='pattern']:checked").value), i.insertAdjacentHTML("beforeend","marker_out",
                                            document.querySelector("[name='marker_out']:checked").value), i.insertAdjacentHTML("beforeend","marker_in",
                                                document.querySelector("[name='marker_in']:checked").value), i.insertAdjacentHTML("beforeend","optionlogo",
                                                    document.querySelector("[name='optionlogo']:checked").value), i.insertAdjacentHTML("beforeend","outer_frame",
                                                        document.querySelector("[name='outer_frame']:checked").value), i.insertAdjacentHTML("beforeend","framelabel",
                                                            document.querySelector("[name='framelabel']").value), i.insertAdjacentHTML("beforeend","label_font",
                                                                document.querySelector("[name='label_font']").value), i.insertAdjacentHTML("beforeend","type",
                                                                    document.querySelector("[name='type']:checked").value),
                    // i.insertAdjacentHTML("beforeend","_token",document.querySelector("meta[name='csrf']").attr("content")),
                    $.ajax({
                        url: "/dashboard/create/save",
                        type: "POST", processData: !1,
                        contentType: !1, data: i,
                        success: function () { window.location.href = "/dashboard" },
                        error: function () {
                            !function (e, a) { e.attr("disabled", !1), e.text(a) }(r, "Create"),
                            Swal.fire({
                                type: "error", title: "Oops...",
                                text: "Something went wrong! There was an error update the qrcode. Make sure you filled up the form with correct data.", confirmButtonClass: "btn btn-confirm mt-2"
                            })
                        }, xhr: function () { var e = new window.XMLHttpRequest; return e.upload.addEventListener("progress", (function (e) { if (e.lengthComputable) { var a = e.loaded / e.total; document.querySelector("#create-progress").css("width", 100 * a + "%") } }), !1), e }
                    })
            })), r(); var o, c = new URL(window.location.href).searchParams; c.get("active") && (o = c.get("active"), document.querySelector(".active_type").classList.remove("active_type"), document.querySelector(".active_form").classList.remove("active_form"), document.querySelector("[for='".concat(o, "'] .qr-info__tab-content")).classList.add("active_type"), document.querySelector(".qr-info__form-".concat(o)).classList.add("active_form"))
})();